<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>TestWorld!!!</title>
    <script src="./vue/vue-dev.js"></script>
    <script src="./element/index.js"></script>
    <link rel="stylesheet" href="./element/index.css" />
    <script>
      function reactText() {
        var inStr = document.getElementById("input").value;
        var outStr = "";
        for (var i = 0; i < inStr.length; i++) {
          var indexStr = inStr.substr(i, 1);
          if (indexStr.indexOf("你") > -1) {
            indexStr = "我";
          } else if (indexStr.indexOf("我") > -1) {
            indexStr = "你";
          }
          outStr += indexStr;
        }
        document.getElementById("output").value = outStr;
      }
    </script>
    <style>
      .el-col{
        align-content: left;
      }
      .label{
        text-align: right;
        vertical-align: middle;
      }
    </style>
  </head>
  <body>
    <div id="vueApp">
      <el-container>
        <el-header>
          {{ message}}
        </el-header>
      <el-container>
        <el-main>
          <input-vue></input-vue>
          <output-vue></output-vue>
        </el-main>
        <el-footer>Footer</el-footer>
          
        </el-footer>
      </el-container>
      </el-container>
    </div>

    <template id="inputTemplate">
        <div>
          <el-row>
            <el-col :span="4" class="label">选择</el-col>
            <el-col :span="20"><input type="file" id="file" v-on:change="chooseFile(this)" /></el-col>
          </el-row>
          <el-row>
            <el-col :span="4" class="label">你选择了</el-col>
            <el-col :span="20">{{filename}}</el-col>
          </el-row>
          <el-row>
            <el-col :span="4" class="label">input:</el-col>
            <el-col :span="20">
              <textarea
                id="input"
                onchange="reactText()"
                style="width: 100%; height: 100%; min-height: 250px;"
              ></textarea>
            </el-col>
          </el-row>
        </div>
    </template>

    <template id="outTemplate">
        <el-row>
          <el-col :span="4" class="label">output:</el-col>
          <el-col :span="20">
            <textarea 
              id="output"
              style="min-height: 250px;width: 100%;height: 100%;"
            ></textarea>
          </el-col>
        </el-row>
    </template>

    <script>
      var inputVue = {
        template: "#inputTemplate",
        data: function () {
          return {
            filename: "",
          };
        },
        methods: {
          chooseFile() {
            var input = document.getElementById("file");
            var reader = new FileReader();
            var file = input.files[0];
            reader.readAsText(file);
            reader.onload = function () {
              document.getElementById("input").value = this.result;
              reactText();
            };
            this.filename = input.files[0].path;
            // document.getElementById("choose").innerText = input.files[0].path;
          },
        },
      };
      var outputVue = {
        template: "#outTemplate",
        // props:["context"],
        data: function () {
          return {};
        },
      };
      //根组件 vue app
      var app = new Vue({
        el: "#vueApp",
        components: {
          "input-vue": inputVue,
          "output-vue": outputVue,
        },
        data: {
          message: "Hello,world",
          outContext: "",
        },
      });
    </script>
  </body>
</html>
